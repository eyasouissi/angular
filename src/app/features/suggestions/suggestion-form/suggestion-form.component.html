<div class="page">
  <a routerLink="/suggestions" class="back-link">‚Üê Retour √† la liste</a>

  <div class="form-card">
    <div class="card-header">
      <span class="page-tag">Nouvelle suggestion</span>
      <h1 class="page-title">Partagez votre id√©e</h1>
      <p class="page-sub">Chaque grande am√©lioration commence par une simple id√©e.</p>
    </div>

    <form class="form-body" [formGroup]="suggestionForm" (ngSubmit)="onSubmit()">

      <!-- TITRE -->
      <div class="form-group">
        <label for="title">Titre</label>
        <input id="title" type="text" formControlName="title" placeholder="Ex: Am√©lioration Wifi‚Ä¶" />
        <div *ngIf="suggestionForm.get('title')?.touched && suggestionForm.get('title')?.invalid">
          <span class="error" *ngIf="suggestionForm.get('title')?.errors?.['required']">Le titre est obligatoire.</span>
          <span class="error" *ngIf="suggestionForm.get('title')?.errors?.['minlength']">Minimum 5 caract√®res.</span>
          <span class="error" *ngIf="suggestionForm.get('title')?.errors?.['pattern']">Doit commencer par une majuscule.</span>
        </div>
      </div>

      <!-- DESCRIPTION -->
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description" rows="4"
          placeholder="D√©crivez votre suggestion en d√©tail‚Ä¶"></textarea>
        <div *ngIf="suggestionForm.get('description')?.touched && suggestionForm.get('description')?.invalid">
          <span class="error" *ngIf="suggestionForm.get('description')?.errors?.['required']">La description est obligatoire.</span>
          <span class="error" *ngIf="suggestionForm.get('description')?.errors?.['minlength']">Minimum 30 caract√®res.</span>
        </div>
      </div>

      <!-- CATEGORIE -->
      <div class="form-group">
        <label for="category">Cat√©gorie</label>
        <select id="category" formControlName="category">
          <option value="">-- S√©lectionner une cat√©gorie --</option>
          <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
        </select>
        <div *ngIf="suggestionForm.get('category')?.touched && suggestionForm.get('category')?.invalid">
          <span class="error">La cat√©gorie est obligatoire.</span>
        </div>
      </div>

      <!-- DATE & STATUS (readonly) -->
      <div class="form-row">
        <div class="form-group">
          <label for="date">Date</label>
          <input id="date" type="text" formControlName="date" readonly class="readonly-input" />
        </div>
        <div class="form-group">
          <label for="status">Statut</label>
          <input id="status" type="text" formControlName="status" readonly class="readonly-input" />
        </div>
      </div>

      <!-- SUBMIT -->
      <div class="form-actions">
        <a routerLink="/suggestions" class="btn-cancel">Annuler</a>
        <button type="submit" [disabled]="suggestionForm.invalid" class="btn-submit">
          üöÄ Soumettre la suggestion
        </button>
      </div>

    </form>
  </div>
</div>